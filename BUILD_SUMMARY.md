# é¡¹ç›®æ„å»ºæ€»ç»“

## âœ… æˆåŠŸå®Œæˆå¾®ä¿¡å°ç¨‹åº WebAssembly å…¼å®¹æ€§æ„å»º

### ğŸ¯ è§£å†³çš„æ ¸å¿ƒé—®é¢˜
- **åŸé—®é¢˜**: æ ‡å‡†wasm-bindgenç”Ÿæˆçš„JavaScriptä»£ç åŒ…å«ES6æ¨¡å—ï¼ˆimport/exportï¼‰ï¼Œä¸å…¼å®¹å¾®ä¿¡å°ç¨‹åºç¯å¢ƒ
- **è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨`--target no-modules`å‚æ•°ç”Ÿæˆå…¨å±€å˜é‡å½¢å¼çš„ä»£ç ï¼Œé¿å…ç›´æ¥ä¿®æ”¹ç”Ÿæˆçš„JavaScriptæ–‡ä»¶

### ğŸ“¦ ç”Ÿæˆçš„æ–‡ä»¶

#### ä¸»è¦è¾“å‡ºæ–‡ä»¶ï¼ˆä½äº `pkg-miniprogram/`ï¼‰ï¼š
- `rustwasmdemo.js` (8.4KB) - å¾®ä¿¡å°ç¨‹åºå…¼å®¹çš„JavaScriptç»‘å®š
- `rustwasmdemo_bg.wasm` (24.7KB) - WebAssemblyäºŒè¿›åˆ¶æ¨¡å—

#### æ„å»ºè„šæœ¬ï¼š
- `build-miniprogram.ps1` - Windows PowerShellæ„å»ºè„šæœ¬
- `build-miniprogram.sh` - Linux/macOS Bashæ„å»ºè„šæœ¬

#### ç¤ºä¾‹é¡¹ç›®ï¼š
- `miniprogram-example/` - å®Œæ•´çš„å¾®ä¿¡å°ç¨‹åºç¤ºä¾‹é¡¹ç›®
- `MINIPROGRAM_GUIDE.md` - è¯¦ç»†ä½¿ç”¨æŒ‡å—

### ğŸ”§ å…³é”®æŠ€æœ¯é…ç½®

#### Cargo.toml ä¼˜åŒ–ï¼š
```toml
[package.metadata.wasm-pack.profile.release]
wasm-opt = false

[package.metadata.wasm-pack.profile.dev]
wasm-opt = false
```

#### æ„å»ºå‘½ä»¤ï¼š
```bash
cargo build --target wasm32-unknown-unknown --release
wasm-bindgen \
    --target no-modules \
    --out-dir pkg-miniprogram \
    --out-name rustwasmdemo \
    --no-typescript \
    target/wasm32-unknown-unknown/release/rustwasmdemo.wasm
```

### ğŸ“Š å…¼å®¹æ€§éªŒè¯

âœ… **æ— ES6æ¨¡å—ä¾èµ–**: ç”Ÿæˆçš„ä»£ç ä½¿ç”¨å…¨å±€å˜é‡å½¢å¼  
âœ… **æ— TypeScriptæ–‡ä»¶**: é¿å…äº†.d.tsæ–‡ä»¶ç”Ÿæˆ  
âœ… **å¾®ä¿¡å°ç¨‹åºé€‚é…**: ä»£ç ç»“æ„å®Œå…¨å…¼å®¹å°ç¨‹åºç¯å¢ƒ  
âœ… **åŠŸèƒ½å®Œæ•´æ€§**: æ‰€æœ‰Rustå‡½æ•°éƒ½æ­£ç¡®å¯¼å‡º  

### ğŸš€ å¯ç”¨çš„WASMå‡½æ•°

1. `add(a, b)` - åŠ æ³•è¿ç®—
2. `multiply(a, b)` - ä¹˜æ³•è¿ç®—  
3. `greet(name)` - ç”Ÿæˆé—®å€™è¯­
4. `factorial(n)` - è®¡ç®—é˜¶ä¹˜
5. `is_prime(n)` - åˆ¤æ–­è´¨æ•°
6. `main()` - åˆå§‹åŒ–å‡½æ•°

### ğŸ“± å¾®ä¿¡å°ç¨‹åºé›†æˆ

ç”Ÿæˆçš„ä»£ç å®Œå…¨å…¼å®¹å¾®ä¿¡å°ç¨‹åºç¯å¢ƒï¼š
- æ— éœ€ä¿®æ”¹ç”Ÿæˆçš„JavaScriptä»£ç 
- æ”¯æŒé€šè¿‡ç½‘ç»œåŠ è½½WASMæ–‡ä»¶
- æä¾›å®Œæ•´çš„é”™è¯¯å¤„ç†æœºåˆ¶
- åŒ…å«ç¤ºä¾‹é¡¹ç›®å’Œè¯¦ç»†æ–‡æ¡£

### ğŸ‰ é¡¹ç›®æˆæœ

é€šè¿‡è¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæ‚¨ç°åœ¨å¯ä»¥ï¼š
1. ä½¿ç”¨æ ‡å‡†çš„Rustå¼€å‘æµç¨‹
2. è‡ªåŠ¨ç”Ÿæˆå¾®ä¿¡å°ç¨‹åºå…¼å®¹çš„WebAssemblyæ¨¡å—
3. é¿å…æ‰‹åŠ¨ä¿®æ”¹ç”Ÿæˆçš„ä»£ç 
4. ä¿æŒä»£ç çš„å¯ç»´æŠ¤æ€§å’Œä¸€è‡´æ€§

æ¯æ¬¡éœ€è¦æ›´æ–°WASMæ¨¡å—æ—¶ï¼Œåªéœ€è¿è¡Œæ„å»ºè„šæœ¬å³å¯ç”Ÿæˆæ–°çš„å…¼å®¹æ–‡ä»¶ï¼Œæ— éœ€ä»»ä½•æ‰‹åŠ¨å¹²é¢„ã€‚